# 手动触发流水线,文档
# https://docs.cnb.cool/zh/build/web-trigger.html#zi-ding-yi-an-niu-pei-zhi
branch:
  # 如下按钮在分支名以 release 开头的分支详情页面显示
  - reg: "^main"
    buttons:
      - name: 拉取github代码
        # 如存在，则将作为流水线 title，否则流水线使用默认 title；可支持环境变量替换（仅支持替换一级，环境变量指的是当前配置的 env 和 inputs。仅支持 ${xxx} 写法。）
        description: 从github拉取代码
        # 触发的 CI 事件名，需要在 .cnb.yml 中配置
        event: pull_github
        # 是否默认按钮
        isDefault: false
        # 权限控制，不配置则有仓库写权限的用户可触发构建
        # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
        # 注意：仅支持在页面检查 permissions 权限
        permissions:
          # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
          # 角色非向上包含关系。例如如下配置，表示仅 master 或 developer 角色才有权限，owner 即使仓库权限更高，但此处无权限
          roles:
            - master
            - developer
        # 环境变量
        env:
          # 默认传入的环境变量，其中 key 值（a,b,c）为环境变量名，支持如下两种格式
          a: 1
          b: 2
          c:
            # 环境变量别名
            name: 变量c
            # 环境变量值
            value: 3
        # 可输入环境变量，可覆盖上述 env 的变量配置
        inputs:
          # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关（switch），radio 单选框（radio）
          # 其中 key 值（var1、var2、var3、var4、var5、var6）为环境变量名
          # inputs 也支持分组，见下方按钮二 inputs 配置
          var1:
            # 输入框
            name: 变量1
            description: 变量1描述
            placeholder: 请输入变量1
            required: true # 是否必填
            type: input
            default: 默认值1
          